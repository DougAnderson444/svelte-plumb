{"version":3,"file":"index.svelte-024c56a9.js","sources":["../../../../../../node_modules/@douganderson444/pointer-tracker/dist/PointerTracker.mjs","../../../../../../node_modules/nanoid/index.browser.js","../../../../../../src/lib/CursorMarker.svelte","../../../../../../node_modules/perfect-arrows/dist/perfect-arrows.esm.js","../../../../../../src/lib/Link.svelte","../../../../../../src/lib/Links.svelte","../../../../../../src/lib/Highlighter.svelte","../../../../../../src/lib/utils.js","../../../../../../src/lib/constants.js","../../../../../../src/lib/Canvas.svelte","../../../../../../src/lib/EndPoint.svelte","../../../../../../src/lib/Skew.svelte","../../../../../../node_modules/svelte/easing/index.mjs","../../../../../../node_modules/svelte/transition/index.mjs","../../../../../../src/lib/Toast.svelte","../../../../../../src/lib/Delegate.svelte","../../../../../../src/routes/index.svelte"],"sourcesContent":["class Pointer {\r\n    constructor(nativePointer) {\r\n        /** Unique ID for this pointer */\r\n        this.id = -1;\r\n        this.nativePointer = nativePointer;\r\n        this.pageX = nativePointer.pageX;\r\n        this.pageY = nativePointer.pageY;\r\n        this.clientX = nativePointer.clientX;\r\n        this.clientY = nativePointer.clientY;\r\n        if (self.Touch && nativePointer instanceof Touch) {\r\n            this.id = nativePointer.identifier;\r\n        }\r\n        else if (isPointerEvent(nativePointer)) {\r\n            // is PointerEvent\r\n            this.id = nativePointer.pointerId;\r\n        }\r\n    }\r\n    /**\r\n     * Returns an expanded set of Pointers for high-resolution inputs.\r\n     */\r\n    getCoalesced() {\r\n        if ('getCoalescedEvents' in this.nativePointer) {\r\n            const events = this.nativePointer\r\n                .getCoalescedEvents()\r\n                .map((p) => new Pointer(p));\r\n            // Firefox sometimes returns an empty list here. I'm not sure it's doing the right thing.\r\n            // https://github.com/w3c/pointerevents/issues/409\r\n            if (events.length > 0)\r\n                return events;\r\n            // Otherwise, Firefox falls through…\r\n        }\r\n        return [this];\r\n    }\r\n}\r\nconst isPointerEvent = (event) => 'pointerId' in event;\r\nconst isTouchEvent = (event) => 'changedTouches' in event;\r\nconst noop = () => { };\r\n/**\r\n * Track pointers across a particular element\r\n */\r\nclass PointerTracker {\r\n    /**\r\n     * Track pointers across a particular element\r\n     *\r\n     * @param element Element to monitor.\r\n     * @param options\r\n     */\r\n    constructor(_element, { start = () => true, move = noop, end = noop, rawUpdates = false, avoidPointerEvents = false, eventListenerOptions = { capture: false, passive: false, once: false }, } = {}) {\r\n        this._element = _element;\r\n        /**\r\n         * State of the tracked pointers when they were pressed/touched.\r\n         */\r\n        this.startPointers = [];\r\n        /**\r\n         * Latest state of the tracked pointers. Contains the same number of pointers, and in the same\r\n         * order as this.startPointers.\r\n         */\r\n        this.currentPointers = [];\r\n        /**\r\n         * Firefox has a bug where touch-based pointer events have a `buttons` of 0, when this shouldn't\r\n         * happen. https://bugzilla.mozilla.org/show_bug.cgi?id=1729440\r\n         *\r\n         * Usually we treat `buttons === 0` as no-longer-pressed. This set allows us to exclude these\r\n         * buggy Firefox events.\r\n         */\r\n        this._excludeFromButtonsCheck = new Set();\r\n        /**\r\n         * Listener for mouse/pointer starts.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerStart = (event) => {\r\n            if (isPointerEvent(event) && event.buttons === 0) {\r\n                // This is the buggy Firefox case. See _excludeFromButtonsCheck.\r\n                this._excludeFromButtonsCheck.add(event.pointerId);\r\n            }\r\n            else if (!(event.buttons & 1 /* LeftMouseOrTouchOrPenDown */)) {\r\n                return;\r\n            }\r\n            const pointer = new Pointer(event);\r\n            // If we're already tracking this pointer, ignore this event.\r\n            // This happens with mouse events when multiple buttons are pressed.\r\n            if (this.currentPointers.some((p) => p.id === pointer.id))\r\n                return;\r\n            if (!this._triggerPointerStart(pointer, event))\r\n                return;\r\n            // Add listeners for additional events.\r\n            // The listeners may already exist, but no harm in adding them again.\r\n            if (isPointerEvent(event)) {\r\n                const capturingElement = event.target && 'setPointerCapture' in event.target\r\n                    ? event.target\r\n                    : this._element;\r\n                capturingElement.setPointerCapture(event.pointerId);\r\n                this._element.addEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move, this._eventListenerOptions);\r\n                this._element.addEventListener('pointerup', this._pointerEnd, this._eventListenerOptions);\r\n                this._element.addEventListener('pointercancel', this._pointerEnd, this._eventListenerOptions);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.addEventListener('mousemove', this._move);\r\n                window.addEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchstart.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchStart = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerStart(new Pointer(touch), event);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for pointer/mouse/touch move events.\r\n         */\r\n        this._move = (event) => {\r\n            if (!isTouchEvent(event) &&\r\n                (!isPointerEvent(event) ||\r\n                    !this._excludeFromButtonsCheck.has(event.pointerId)) &&\r\n                event.buttons === 0 /* None */) {\r\n                // This happens in a number of buggy cases where the browser failed to deliver a pointerup\r\n                // or pointercancel. If we see the pointer moving without any buttons down, synthesize an end.\r\n                // https://github.com/w3c/pointerevents/issues/407\r\n                // https://github.com/w3c/pointerevents/issues/408\r\n                this._pointerEnd(event);\r\n                return;\r\n            }\r\n            const previousPointers = this.currentPointers.slice();\r\n            const changedPointers = isTouchEvent(event)\r\n                ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n                : [new Pointer(event)];\r\n            const trackedChangedPointers = [];\r\n            for (const pointer of changedPointers) {\r\n                const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n                if (index === -1)\r\n                    continue; // Not a pointer we're tracking\r\n                trackedChangedPointers.push(pointer);\r\n                this.currentPointers[index] = pointer;\r\n            }\r\n            if (trackedChangedPointers.length === 0)\r\n                return;\r\n            this._moveCallback(previousPointers, trackedChangedPointers, event);\r\n        };\r\n        /**\r\n         * Call the end callback for this pointer.\r\n         *\r\n         * @param pointer Pointer\r\n         * @param event Related event\r\n         */\r\n        this._triggerPointerEnd = (pointer, event) => {\r\n            // Main button still down?\r\n            // With mouse events, you get a mouseup per mouse button, so the left button might still be down.\r\n            if (!isTouchEvent(event) &&\r\n                event.buttons & 1 /* LeftMouseOrTouchOrPenDown */) {\r\n                return false;\r\n            }\r\n            const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n            // Not a pointer we're interested in?\r\n            if (index === -1)\r\n                return false;\r\n            this.currentPointers.splice(index, 1);\r\n            this.startPointers.splice(index, 1);\r\n            this._excludeFromButtonsCheck.delete(pointer.id);\r\n            // The event.type might be a 'move' event due to workarounds for weird mouse behaviour.\r\n            // See _move for details.\r\n            const cancelled = !(event.type === 'mouseup' ||\r\n                event.type === 'touchend' ||\r\n                event.type === 'pointerup');\r\n            this._endCallback(pointer, event, cancelled);\r\n            return true;\r\n        };\r\n        /**\r\n         * Listener for mouse/pointer ends.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerEnd = (event) => {\r\n            if (!this._triggerPointerEnd(new Pointer(event), event))\r\n                return;\r\n            if (isPointerEvent(event)) {\r\n                if (this.currentPointers.length)\r\n                    return;\r\n                this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n                this._element.removeEventListener('pointerup', this._pointerEnd);\r\n                this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.removeEventListener('mousemove', this._move);\r\n                window.removeEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchend.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchEnd = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerEnd(new Pointer(touch), event);\r\n            }\r\n        };\r\n        this._startCallback = start;\r\n        this._moveCallback = move;\r\n        this._endCallback = end;\r\n        this._rawUpdates = rawUpdates && 'onpointerrawupdate' in window;\r\n        this._eventListenerOptions = eventListenerOptions;\r\n        // Add listeners\r\n        if (self.PointerEvent && !avoidPointerEvents) {\r\n            this._element.addEventListener('pointerdown', this._pointerStart, this._eventListenerOptions);\r\n        }\r\n        else {\r\n            this._element.addEventListener('mousedown', this._pointerStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchstart', this._touchStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchmove', this._move, this._eventListenerOptions);\r\n            this._element.addEventListener('touchend', this._touchEnd, this._eventListenerOptions);\r\n            this._element.addEventListener('touchcancel', this._touchEnd, this._eventListenerOptions);\r\n        }\r\n    }\r\n    /**\r\n     * Remove all listeners.\r\n     */\r\n    stop() {\r\n        this._element.removeEventListener('pointerdown', this._pointerStart);\r\n        this._element.removeEventListener('mousedown', this._pointerStart);\r\n        this._element.removeEventListener('touchstart', this._touchStart);\r\n        this._element.removeEventListener('touchmove', this._move);\r\n        this._element.removeEventListener('touchend', this._touchEnd);\r\n        this._element.removeEventListener('touchcancel', this._touchEnd);\r\n        this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n        this._element.removeEventListener('pointerup', this._pointerEnd);\r\n        this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n        window.removeEventListener('mousemove', this._move);\r\n        window.removeEventListener('mouseup', this._pointerEnd);\r\n    }\r\n    /**\r\n     * Call the start callback for this pointer, and track it if the user wants.\r\n     *\r\n     * @param pointer Pointer\r\n     * @param event Related event\r\n     * @returns Whether the pointer is being tracked.\r\n     */\r\n    _triggerPointerStart(pointer, event) {\r\n        if (!this._startCallback(pointer, event))\r\n            return false;\r\n        this.currentPointers.push(pointer);\r\n        this.startPointers.push(pointer);\r\n        return true;\r\n    }\r\n}\n\nexport { PointerTracker as default };\n","export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\texport let marker;\r\n\texport let id;\r\n\texport let left;\r\n\texport let top;\r\n\r\n\tlet offsetWidth;\r\n\tlet offsetHeight;\r\n\r\n\t$: x = left - offsetWidth / 2;\r\n\t$: y = top - offsetHeight / 2;\r\n</script>\r\n\r\n<div\r\n\tbind:this={marker}\r\n\t{id}\r\n\tclass=\"absolute\"\r\n\tstyle=\"left:{x}px; top:{y}px;\"\r\n\tbind:offsetWidth\r\n\tbind:offsetHeight\r\n>\r\n\t<slot>\r\n\t\t<div\r\n\t\t\tclass=\"h-4 w-4 p-8 rounded-full shadow-xl opacity-80 select-none border-[2em] border-pink-500/50\"\r\n\t\t/>\r\n\t</slot>\r\n</div>\r\n","var PI = Math.PI;\n/**\r\n * Modulate a value between two ranges.\r\n * @param value\r\n * @param rangeA from [low, high]\r\n * @param rangeB to [low, high]\r\n * @param clamp\r\n */\n\nfunction modulate(value, rangeA, rangeB, clamp) {\n  if (clamp === void 0) {\n    clamp = false;\n  }\n\n  var fromLow = rangeA[0],\n      fromHigh = rangeA[1];\n  var toLow = rangeB[0],\n      toHigh = rangeB[1];\n  var result = toLow + (value - fromLow) / (fromHigh - fromLow) * (toHigh - toLow);\n\n  if (clamp === true) {\n    if (toLow < toHigh) {\n      if (result < toLow) {\n        return toLow;\n      }\n\n      if (result > toHigh) {\n        return toHigh;\n      }\n    } else {\n      if (result > toLow) {\n        return toLow;\n      }\n\n      if (result < toHigh) {\n        return toHigh;\n      }\n    }\n  }\n\n  return result;\n}\n/**\r\n * Rotate a point around a center.\r\n * @param x The x-axis coordinate of the point.\r\n * @param y The y-axis coordinate of the point.\r\n * @param cx The x-axis coordinate of the point to rotate round.\r\n * @param cy The y-axis coordinate of the point to rotate round.\r\n * @param angle The distance (in radians) to rotate.\r\n */\n\nfunction rotatePoint(x, y, cx, cy, angle) {\n  var s = Math.sin(angle);\n  var c = Math.cos(angle);\n  var px = x - cx;\n  var py = y - cy;\n  var nx = px * c - py * s;\n  var ny = px * s + py * c;\n  return [nx + cx, ny + cy];\n}\n/**\r\n * Get the distance between two points.\r\n * @param x0 The x-axis coordinate of the first point.\r\n * @param y0 The y-axis coordinate of the first point.\r\n * @param x1 The x-axis coordinate of the second point.\r\n * @param y1 The y-axis coordinate of the second point.\r\n */\n\nfunction getDistance(x0, y0, x1, y1) {\n  return Math.hypot(y1 - y0, x1 - x0);\n}\n/**\r\n * Get an angle (radians) between two points.\r\n * @param x0 The x-axis coordinate of the first point.\r\n * @param y0 The y-axis coordinate of the first point.\r\n * @param x1 The x-axis coordinate of the second point.\r\n * @param y1 The y-axis coordinate of the second point.\r\n */\n\nfunction getAngle(x0, y0, x1, y1) {\n  return Math.atan2(y1 - y0, x1 - x0);\n}\n/**\r\n * Move a point in an angle by a distance.\r\n * @param x0\r\n * @param y0\r\n * @param a angle (radians)\r\n * @param d distance\r\n */\n\nfunction projectPoint(x0, y0, a, d) {\n  return [Math.cos(a) * d + x0, Math.sin(a) * d + y0];\n}\n/**\r\n * Get a point between two points.\r\n * @param x0 The x-axis coordinate of the first point.\r\n * @param y0 The y-axis coordinate of the first point.\r\n * @param x1 The x-axis coordinate of the second point.\r\n * @param y1 The y-axis coordinate of the second point.\r\n * @param d Normalized\r\n */\n\nfunction getPointBetween(x0, y0, x1, y1, d) {\n  if (d === void 0) {\n    d = 0.5;\n  }\n\n  return [x0 + (x1 - x0) * d, y0 + (y1 - y0) * d];\n}\n/**\r\n * Get the sector of an angle (e.g. quadrant, octant)\r\n * @param a The angle to check.\r\n * @param s The number of sectors to check.\r\n */\n\nfunction getSector(a, s) {\n  if (s === void 0) {\n    s = 8;\n  }\n\n  return Math.floor(s * (0.5 + a / (PI * 2) % s));\n}\n/**\r\n * Get a normal value representing how close two points are from being at a 45 degree angle.\r\n * @param x0 The x-axis coordinate of the first point.\r\n * @param y0 The y-axis coordinate of the first point.\r\n * @param x1 The x-axis coordinate of the second point.\r\n * @param y1 The y-axis coordinate of the second point.\r\n */\n\nfunction getAngliness(x0, y0, x1, y1) {\n  return Math.abs((x1 - x0) / 2 / ((y1 - y0) / 2));\n}\n/**\r\n * Check whether two rectangles will collide (overlap).\r\n * @param x0 The x-axis coordinate of the first rectangle.\r\n * @param y0 The y-axis coordinate of the first rectangle.\r\n * @param w0 The width of the first rectangle.\r\n * @param h0 The height of the first rectangle.\r\n * @param x1 The x-axis coordinate of the second rectangle.\r\n * @param y1 The y-axis coordinate of the second rectangle.\r\n * @param w1 The width of the second rectangle.\r\n * @param h1 The height of the second rectangle.\r\n */\n\nfunction doRectanglesCollide(x0, y0, w0, h0, x1, y1, w1, h1) {\n  return !(x0 >= x1 + w1 || x1 >= x0 + w0 || y0 >= y1 + h1 || y1 >= y0 + h0);\n}\n/**\r\n * Get the point(s) where a line segment intersects a circle.\r\n * @param cx The x-axis coordinate of the circle's center.\r\n * @param cy The y-axis coordinate of the circle's center.\r\n * @param r The circle's radius.\r\n * @param x0 The x-axis coordinate of the segment's starting point.\r\n * @param y0 The y-axis coordinate of ththe segment's ending point.\r\n * @param x1 The delta-x of the ray.\r\n * @param y1 The delta-y of the ray.\r\n */\n\nfunction getSegmentCircleIntersections(cx, cy, r, x0, y0, x1, y1) {\n  var b,\n      c,\n      d,\n      u1,\n      u2,\n      ret,\n      retP1,\n      retP2,\n      v1 = [x1 - x0, y1 - y0],\n      v2 = [x0 - cx, y0 - cy];\n  b = v1[0] * v2[0] + v1[1] * v2[1];\n  c = 2 * (v1[0] * v1[0] + v1[1] * v1[1]);\n  b *= -2;\n  d = Math.sqrt(b * b - 2 * c * (v2[0] * v2[0] + v2[1] * v2[1] - r * r));\n\n  if (isNaN(d)) {\n    // no intercept\n    return [];\n  }\n\n  u1 = (b - d) / c; // these represent the unit distance of point one and two on the line\n\n  u2 = (b + d) / c;\n  retP1 = []; // return points\n\n  retP2 = [];\n  ret = []; // return array\n\n  if (u1 <= 1 && u1 >= 0) {\n    // add point if on the line segment\n    retP1[0] = x0 + v1[0] * u1;\n    retP1[1] = y0 + v1[1] * u1;\n    ret[0] = retP1;\n  }\n\n  if (u2 <= 1 && u2 >= 0) {\n    // second add point if on the line segment\n    retP2[0] = x0 + v1[0] * u2;\n    retP2[1] = y0 + v1[1] * u2;\n    ret[ret.length] = retP2;\n  }\n\n  return ret;\n}\n/**\r\n * Normalize an angle (in radians)\r\n * @param radians The radians quantity to normalize.\r\n */\n\nfunction normalizeAngle(radians) {\n  return radians - PI * 2 * Math.floor(radians / (PI * 2));\n}\n/**\r\n * Get the point at which a ray intersects a segment.\r\n * @param x The x-axis coordinate of the ray's origin.\r\n * @param y The y-axis coordinate of the ray's origin.\r\n * @param dx The x-axis delta of the angle.\r\n * @param dy The y-axis delta of the angle.\r\n * @param x0 The x-axis coordinate of the segment's start point.\r\n * @param y0 The y-axis coordinate of the segment's start point.\r\n * @param x1 The x-axis coordinate of the segment's end point.\r\n * @param y1 The y-axis coordinate of the segment's end point.\r\n */\n\nfunction getRaySegmentIntersection(x, y, dx, dy, x0, y0, x1, y1) {\n  var r, s, d;\n\n  if (dy * (x1 - x0) !== dx * (y1 - y0)) {\n    d = dx * (y1 - y0) - dy * (x1 - x0);\n\n    if (d !== 0) {\n      r = ((y - y0) * (x1 - x0) - (x - x0) * (y1 - y0)) / d;\n      s = ((y - y0) * dx - (x - x0) * dy) / d;\n\n      if (r >= 0 && s >= 0 && s <= 1) {\n        return [x + r * dx, y + r * dy];\n      }\n    }\n  }\n\n  return undefined;\n}\n/**\r\n * Get the normalized delta (x and y) for an angle.\r\n * @param angle The angle in radians\r\n */\n\nfunction getDelta(angle) {\n  return [Math.cos(angle), Math.sin(angle)];\n}\nfunction getIntermediate(angle) {\n  return Math.abs(Math.abs(angle % (PI / 2)) - PI / 4) / (PI / 4);\n}\n/**\r\n * Get a line between two rounded rectangles.\r\n * @param x0\r\n * @param y0\r\n * @param w0\r\n * @param h0\r\n * @param r0\r\n * @param x1\r\n * @param y1\r\n * @param w1\r\n * @param h1\r\n * @param r1\r\n */\n\nfunction getLineBetweenRoundedRectangles(x0, y0, w0, h0, r0, x1, y1, w1, h1, r1) {\n  var cx0 = x0 + w0 / 2,\n      cy0 = y0 + h0 / 2,\n      cx1 = x1 + w1 / 2,\n      cy1 = y1 + h1 / 2,\n      _ref3 = getRayRoundedRectangleIntersection(cx0, cy0, cx1 - cx0, cy1 - cy0, x0, y0, w0, h0, r0) || [[cx0, cy0]],\n      _ref3$ = _ref3[0],\n      di0x = _ref3$[0],\n      di0y = _ref3$[1],\n      _ref4 = getRayRoundedRectangleIntersection(cx1, cy1, cx0 - cx1, cy0 - cy1, x1, y1, w1, h1, r1) || [[cx1, cy1]],\n      _ref4$ = _ref4[0],\n      di1x = _ref4$[0],\n      di1y = _ref4$[1];\n\n  return [di0x, di0y, di1x, di1y];\n}\n/**\r\n * Get the intersection points between a ray and a rectangle with rounded corners.\r\n * @param ox The x-axis coordinate of the ray's origin.\r\n * @param oy The y-axis coordinate of the ray's origin.\r\n * @param dx The delta-x of the ray.\r\n * @param dy The delta-y of the ray.\r\n * @param x The x-axis coordinate of the rectangle.\r\n * @param y The y-axis coordinate of the rectangle.\r\n * @param w The width of the rectangle.\r\n * @param h The height of the rectangle.\r\n * @param r The corner radius of the rectangle.\r\n */\n\nfunction getRayRoundedRectangleIntersection(ox, oy, dx, dy, x, y, w, h, r) {\n  var mx = x + w,\n      my = y + h,\n      rx = x + r - 1,\n      ry = y + r - 1,\n      mrx = x + w - r + 1,\n      mry = y + h - r + 1;\n  var segments = [[x, mry, x, ry], [rx, y, mrx, y], [mx, ry, mx, mry], [mrx, my, rx, my]];\n  var corners = [[rx, ry, Math.PI, Math.PI * 1.5], [mrx, ry, Math.PI * 1.5, Math.PI * 2], [mrx, mry, 0, Math.PI * 0.5], [rx, mry, Math.PI * 0.5, Math.PI]];\n  var points = [];\n  segments.forEach(function (segment, i) {\n    var px0 = segment[0],\n        py0 = segment[1],\n        px1 = segment[2],\n        py1 = segment[3];\n    var _corners$i2 = corners[i],\n        cx = _corners$i2[0],\n        cy = _corners$i2[1],\n        as = _corners$i2[2],\n        ae = _corners$i2[3];\n    var intersections = getRayCircleIntersection(cx, cy, r, ox, oy, dx, dy);\n    intersections && intersections.filter(function (pt) {\n      var pointAngle = normalizeAngle(getAngle(cx, cy, pt[0], pt[1]));\n      return pointAngle > as && pointAngle < ae;\n    }).forEach(function (pt) {\n      return points.push(pt);\n    });\n    var segmentInt = getRaySegmentIntersection(ox, oy, dx, dy, px0, py0, px1, py1);\n\n    if (!!segmentInt) {\n      points.push(segmentInt);\n    }\n  });\n  return points;\n}\nfunction getRectangleSegmentIntersectedByRay(x, y, w, h, ox, oy, dx, dy) {\n  return getRectangleSegments(x, y, w, h).find(function (_ref5) {\n    var sx0 = _ref5[0],\n        sy0 = _ref5[1],\n        sx1 = _ref5[2],\n        sy1 = _ref5[3];\n    return getRaySegmentIntersection(ox, oy, dx, dy, sx0, sy0, sx1, sy1);\n  });\n}\nfunction getRectangleSegments(x, y, w, h) {\n  return [[x, y, x + w, y], [x + w, y, x + w, y + h], [x + w, y + h, x, y + h], [x, y + h, x, y]];\n}\nfunction getRayCircleIntersection(cx, cy, r, ox, oy, dx, dy) {\n  // This is a shitty hack\n  return getSegmentCircleIntersections(cx, cy, r, ox, oy, dx * 999999, dy * 999999);\n}\n\n/**\r\n * getArrow\r\n * Get the points for a linking line between two points.\r\n * @description Draw an arrow between two points.\r\n * @param x0 The x position of the \"from\" point.\r\n * @param y0 The y position of the \"from\" point.\r\n * @param x1 The x position of the \"to\" point.\r\n * @param y1 The y position of the \"to\" point.\r\n * @param options Additional options for computing the line.\r\n * @returns [sx, sy, cx, cy, e1, e2, ae, as, ac]\r\n * @example\r\n * const arrow = getArrow(0, 0, 100, 200, {\r\n    bow: 0\r\n    stretch: .5\r\n    stretchMin: 0\r\n    stretchMax: 420\r\n    padStart: 0\r\n    padEnd: 0\r\n    flip: false\r\n    straights: true\r\n * })\r\n *\r\n * const [\r\n *  startX, startY,\r\n *  controlX, controlY,\r\n *  endX, endY,\r\n *  endAngle,\r\n *  startAngle,\r\n *  controlAngle\r\n *  ] = arrow\r\n */\n\nfunction getArrow(x0, y0, x1, y1, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$bow = _options.bow,\n      bow = _options$bow === void 0 ? 0 : _options$bow,\n      _options$stretch = _options.stretch,\n      stretch = _options$stretch === void 0 ? 0.5 : _options$stretch,\n      _options$stretchMin = _options.stretchMin,\n      stretchMin = _options$stretchMin === void 0 ? 0 : _options$stretchMin,\n      _options$stretchMax = _options.stretchMax,\n      stretchMax = _options$stretchMax === void 0 ? 420 : _options$stretchMax,\n      _options$padStart = _options.padStart,\n      padStart = _options$padStart === void 0 ? 0 : _options$padStart,\n      _options$padEnd = _options.padEnd,\n      padEnd = _options$padEnd === void 0 ? 0 : _options$padEnd,\n      _options$flip = _options.flip,\n      flip = _options$flip === void 0 ? false : _options$flip,\n      _options$straights = _options.straights,\n      straights = _options$straights === void 0 ? true : _options$straights;\n  var angle = getAngle(x0, y0, x1, y1);\n  var dist = getDistance(x0, y0, x1, y1);\n  var angliness = getAngliness(x0, y0, x1, y1); // Step 0 ⤜⤏ Should the arrow be straight?\n\n  if (dist < (padStart + padEnd) * 2 || bow === 0 && stretch === 0 || straights && [0, 1, Infinity].includes(angliness) // 45 degree angle\n  ) {\n    // ⤜⤏ Arrow is straight! Just pad start and end points.\n    // Padding distances\n    var ps = Math.max(0, Math.min(dist - padStart, padStart));\n    var pe = Math.max(0, Math.min(dist - ps, padEnd)); // Move start point toward end point\n\n    var _projectPoint = projectPoint(x0, y0, angle, ps),\n        _px = _projectPoint[0],\n        _py = _projectPoint[1]; // Move end point toward start point\n\n\n    var _projectPoint2 = projectPoint(x1, y1, angle + Math.PI, pe),\n        _px2 = _projectPoint2[0],\n        _py2 = _projectPoint2[1]; // Get midpoint between new points\n\n\n    var _getPointBetween = getPointBetween(_px, _py, _px2, _py2, 0.5),\n        _mx = _getPointBetween[0],\n        _my = _getPointBetween[1];\n\n    return [_px, _py, _mx, _my, _px2, _py2, angle, angle, angle];\n  } // ⤜⤏ Arrow is an arc!\n  // Is the arc clockwise or counterclockwise?\n\n\n  var rot = (getSector(angle) % 2 === 0 ? 1 : -1) * (flip ? -1 : 1); // Calculate how much the line should \"bow\" away from center\n\n  var arc = bow + modulate(dist, [stretchMin, stretchMax], [1, 0], true) * stretch; // Step 1 ⤜⤏ Find padded points.\n  // Get midpoint.\n\n  var _getPointBetween2 = getPointBetween(x0, y0, x1, y1, 0.5),\n      mx = _getPointBetween2[0],\n      my = _getPointBetween2[1]; // Get control point.\n\n\n  var _getPointBetween3 = getPointBetween(x0, y0, x1, y1, 0.5 - arc),\n      cx = _getPointBetween3[0],\n      cy = _getPointBetween3[1];\n\n  var _rotatePoint = rotatePoint(cx, cy, mx, my, Math.PI / 2 * rot);\n\n  cx = _rotatePoint[0];\n  cy = _rotatePoint[1];\n  // Get padded start point.\n  var a0 = getAngle(x0, y0, cx, cy);\n\n  var _projectPoint3 = projectPoint(x0, y0, a0, padStart),\n      px0 = _projectPoint3[0],\n      py0 = _projectPoint3[1]; // Get padded end point.\n\n\n  var a1 = getAngle(x1, y1, cx, cy);\n\n  var _projectPoint4 = projectPoint(x1, y1, a1, padEnd),\n      px1 = _projectPoint4[0],\n      py1 = _projectPoint4[1]; // Step 2  ⤜⤏ Find start and end angles.\n  // Start angle\n\n\n  var as = getAngle(cx, cy, x0, y0); // End angle\n\n  var ae = getAngle(cx, cy, x1, y1); // Step 3 ⤜⤏ Find control point for padded points.\n  // Get midpoint between padded start / end points.\n\n  var _getPointBetween4 = getPointBetween(px0, py0, px1, py1, 0.5),\n      mx1 = _getPointBetween4[0],\n      my1 = _getPointBetween4[1]; // Get control point for padded start / end points.\n\n\n  var _getPointBetween5 = getPointBetween(px0, py0, px1, py1, 0.5 - arc),\n      cx1 = _getPointBetween5[0],\n      cy1 = _getPointBetween5[1];\n\n  var _rotatePoint2 = rotatePoint(cx1, cy1, mx1, my1, Math.PI / 2 * rot);\n\n  cx1 = _rotatePoint2[0];\n  cy1 = _rotatePoint2[1];\n\n  // Finally, average the two control points.\n  var _getPointBetween6 = getPointBetween(cx, cy, cx1, cy1, 0.5),\n      cx2 = _getPointBetween6[0],\n      cy2 = _getPointBetween6[1];\n\n  return [px0, py0, cx2, cy2, px1, py1, ae, as, angle];\n}\n\nvar PI$1 = Math.PI;\nvar PI2 = PI$1 * 2;\nvar MIN_ANGLE = PI$1 / 24;\n/**\r\n * getArrowBetweenBoxes\r\n * Get the points for a linking line between two boxes.\r\n * @param x0 The x-axis coordinate of the first box.\r\n * @param y0 The y-axis coordinate of the first box.\r\n * @param w0 The width of the first box.\r\n * @param h0 The height of the first box.\r\n * @param x1 The x-axis coordinate of the second box.\r\n * @param y1 The y-axis coordinate of the second box.\r\n * @param w1 The width of the second box.\r\n * @param h1 The height of the second box.\r\n * @param options\r\n */\n\nfunction getBoxToBoxArrow(x0, y0, w0, h0, x1, y1, w1, h1, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var sx, sy, ex, ey;\n  var _options = options,\n      _options$bow = _options.bow,\n      bow = _options$bow === void 0 ? 0 : _options$bow,\n      _options$stretch = _options.stretch,\n      stretch = _options$stretch === void 0 ? 0.25 : _options$stretch,\n      _options$stretchMin = _options.stretchMin,\n      stretchMin = _options$stretchMin === void 0 ? 50 : _options$stretchMin,\n      _options$stretchMax = _options.stretchMax,\n      stretchMax = _options$stretchMax === void 0 ? 420 : _options$stretchMax,\n      _options$padStart = _options.padStart,\n      padStart = _options$padStart === void 0 ? 0 : _options$padStart,\n      _options$padEnd = _options.padEnd,\n      padEnd = _options$padEnd === void 0 ? 20 : _options$padEnd,\n      _options$flip = _options.flip,\n      flip = _options$flip === void 0 ? false : _options$flip,\n      _options$straights = _options.straights,\n      straights = _options$straights === void 0 ? true : _options$straights;\n  var px0 = x0 - padStart,\n      py0 = y0 - padStart,\n      pw0 = w0 + padStart * 2,\n      ph0 = h0 + padStart * 2,\n      px1 = x1 - padEnd,\n      py1 = y1 - padEnd,\n      pw1 = w1 + padEnd * 2,\n      ph1 = h1 + padEnd * 2,\n      cx0 = x0 + w0 / 2,\n      cy0 = y0 + h0 / 2,\n      cx1 = x1 + w1 / 2,\n      cy1 = y1 + h1 / 2; // Angle between centers\n\n  var angle = normalizeAngle(getAngle(cx0, cy0, cx1, cy1)); // Distance between centers\n\n  var distance = getDistance(cx0, cy0, cx1, cy1); // Perfect overlap, no arrow.\n\n  if (distance === 0) {\n    var _sx = cx0,\n        _sy = py0;\n    var _ex = cx1,\n        _ey = py1;\n\n    var _getPointBetween = getPointBetween(_sx, _sy, _ex, _ey, 0.5),\n        cx = _getPointBetween[0],\n        cy = _getPointBetween[1];\n\n    var ca = getAngle(_sx, _sy, _ex, _ey);\n    return [_sx, _sy, cx, cy, _ex, _ey, ca, ca, ca];\n  } // Rotation of the arrow, clockwise or anticlockwise\n\n\n  var rot = (getSector(angle) % 2 === 0 ? -1 : 1) * (flip ? -1 : 1); // How cardinal is the angle? 0 = 45deg, 1 = 90deg\n\n  var card = getIntermediate(angle);\n  if (card < 1 && card > 0.85) card = 0.99; // Are the boxes colliding / overlapping?\n\n  var isColliding = doRectanglesCollide(px0, py0, pw0, ph0, px1, py1, pw1, ph1); // Direct line between boxes\n\n  var _getLineBetweenRounde = getLineBetweenRoundedRectangles(px0, py0, pw0, ph0, padStart, px1, py1, pw1, ph1, padEnd),\n      dix0 = _getLineBetweenRounde[0],\n      diy0 = _getLineBetweenRounde[1],\n      dix1 = _getLineBetweenRounde[2],\n      diy1 = _getLineBetweenRounde[3]; // Length of the direct line between boxes\n\n\n  var distanceBetween = getDistance(dix0, diy0, dix1, diy1);\n  /* ------------- RETURN A STRAIGHT ARROW ------------ */\n  // Should we just draw a straight line?\n\n  if (!isColliding && straights && card % 0.5 === 0) {\n    var _getPointBetween2 = getPointBetween(dix0, diy0, dix1, diy1, 0.5),\n        mpdx = _getPointBetween2[0],\n        mpdy = _getPointBetween2[1];\n\n    return [dix0, diy0, mpdx, mpdy, dix1, diy1, angle, angle - PI$1, angle];\n  }\n  /* -------------- RETURN A CURVED ARROW ------------- */\n  // How much are the two boxes overlapping?\n\n\n  var overlapEffect = isColliding ? modulate(distanceBetween, [0, distance], [0, 1], true) : 0; // How far away are the two boxes?\n\n  var distEffect = 1 - distanceBetween / distance; // How much should the stretch impact the arc?\n\n  var stretchEffect = modulate(distanceBetween, [stretchMin, stretchMax], [1, 0], true); // What should the curved line's arc be?\n\n  var arc = bow + stretchEffect * stretch; // How much should the angle's intermediacy (45degree-ness) affect the angle?\n\n  var angleOffset = modulate(card * card, // a better curve here?\n  [0, 1], [PI$1 * 0.125, 0], true);\n  var distOffset = isColliding ? PI$1 * 0.5 * card : modulate(distEffect, // a better curve here?\n  [0.75, 1], [0, PI$1 * 0.5], true) * card;\n  var combinedOffset = distOffset + angleOffset * (isColliding ? 1 - overlapEffect : 1);\n  /* ----------------- STARTING POINT ----------------- */\n  // Angle of the first box\n\n  var finalAngle0 = overlapEffect >= 0.5 ? angle + PI$1 * rot : angle + Math.max(MIN_ANGLE, combinedOffset) * rot; // Deltas of starting angle\n\n  var _getDelta = getDelta(+(finalAngle0 % PI2).toPrecision(3)),\n      dx0 = _getDelta[0],\n      dy0 = _getDelta[1]; // Get ray intersection with rounded rectangle\n\n\n  var _getRayRoundedRectang = getRayRoundedRectangleIntersection(cx0, cy0, dx0, dy0, px0, py0, pw0, ph0, padStart),\n      _getRayRoundedRectang2 = _getRayRoundedRectang[0],\n      tsx = _getRayRoundedRectang2[0],\n      tsy = _getRayRoundedRectang2[1]; // Get midpoint of startingintersected segment\n\n\n  var startSeg = getRectangleSegmentIntersectedByRay(px0, py0, pw0, ph0, cx0, cy0, dx0, dy0);\n  if (!startSeg) throw Error; // Find start point (quarter way between segment midpoint and ray intersection)\n\n  var ssx0 = startSeg[0],\n      ssy0 = startSeg[1],\n      ssx1 = startSeg[2],\n      ssy1 = startSeg[3];\n\n  var _getPointBetween3 = getPointBetween(ssx0, ssy0, ssx1, ssy1, 0.5),\n      smpx = _getPointBetween3[0],\n      smpy = _getPointBetween3[1];\n\n  var _getPointBetween4 = getPointBetween(tsx, tsy, smpx, smpy, isColliding ? Math.max(overlapEffect, 0.15) : 0.15);\n\n  sx = _getPointBetween4[0];\n  sy = _getPointBetween4[1];\n  arc *= 1 + (Math.max(-2, Math.min(distEffect, 2)) * card - overlapEffect) / 2;\n\n  if (isColliding) {\n    arc = arc < 0 ? Math.min(arc, -0.5) : Math.max(arc, 0.5);\n  }\n  /* ------------------ ENDING POINT ------------------ */\n\n\n  if (overlapEffect >= 0.5) {\n    // If overlapping, use the same angle as the start\n    var rayAngle = getAngle(cx0, cy0, smpx, smpy);\n\n    var _getDelta2 = getDelta(rayAngle),\n        dx1 = _getDelta2[0],\n        dy1 = _getDelta2[1];\n\n    var _getRayRoundedRectang3 = getRayRoundedRectangleIntersection(cx1, cy1, dx1, dy1, px1, py1, pw1, ph1, padEnd);\n\n    var _getRayRoundedRectang4 = _getRayRoundedRectang3[0];\n    ex = _getRayRoundedRectang4[0];\n    ey = _getRayRoundedRectang4[1];\n  } else {\n    // Calculate an angle based on distance, overlap and intermediacy\n    var distOffset1 = modulate(distEffect, [0.75, 1], [0, 1], true);\n    var overlapEffect1 = isColliding ? modulate(overlapEffect, [0, 1], [0, PI$1 / 8], true) : 0;\n    var cardEffect1 = modulate(card * distOffset1, [0, 1], [0, PI$1 / 16], true);\n\n    var _combinedOffset = distEffect * (PI$1 / 12) + (cardEffect1 + overlapEffect1) + (distOffset + angleOffset) / 2;\n\n    var finalAngle1 = overlapEffect >= 0.5 ? angle + PI$1 * rot : angle + PI$1 - Math.max(_combinedOffset, MIN_ANGLE) * rot; // Deltas of ending angle\n\n    var _getDelta3 = getDelta(+(finalAngle1 % PI2).toPrecision(3)),\n        _dx = _getDelta3[0],\n        _dy = _getDelta3[1]; // Get ray intersection with ending rounded rectangle\n\n\n    var _getRayRoundedRectang5 = getRayRoundedRectangleIntersection(cx1, cy1, _dx, _dy, px1, py1, pw1, ph1, padEnd),\n        _getRayRoundedRectang6 = _getRayRoundedRectang5[0],\n        tex = _getRayRoundedRectang6[0],\n        tey = _getRayRoundedRectang6[1]; // Get midpoint of ending intersected segment\n\n\n    var endSeg = getRectangleSegmentIntersectedByRay(px1, py1, pw1, ph1, cx1, cy1, _dx, _dy);\n    if (!endSeg) throw Error;\n    var sex0 = endSeg[0],\n        sey0 = endSeg[1],\n        sex1 = endSeg[2],\n        sey1 = endSeg[3];\n\n    var _getPointBetween5 = getPointBetween(sex0, sey0, sex1, sey1, 0.5),\n        empx = _getPointBetween5[0],\n        empy = _getPointBetween5[1];\n\n    var _getPointBetween6 = getPointBetween(tex, tey, empx, empy, 0.25 + overlapEffect * 0.25);\n\n    ex = _getPointBetween6[0];\n    ey = _getPointBetween6[1];\n  }\n  /* ------------------- DRAW ARROWS ------------------ */\n  // Get midpoints.\n\n\n  var _getPointBetween7 = getPointBetween(sx, sy, ex, ey, 0.5),\n      mx1 = _getPointBetween7[0],\n      my1 = _getPointBetween7[1];\n\n  var _getPointBetween8 = getPointBetween(sx, sy, ex, ey, Math.max(-1, Math.min(1, 0.5 + arc)) // Clamped to 2\n  ),\n      tix = _getPointBetween8[0],\n      tiy = _getPointBetween8[1]; // Rotate them (these are our two potential corners)\n\n\n  var _rotatePoint = rotatePoint(tix, tiy, mx1, my1, PI$1 / 2 * rot),\n      cixA = _rotatePoint[0],\n      ciyA = _rotatePoint[1];\n\n  var _rotatePoint2 = rotatePoint(tix, tiy, mx1, my1, PI$1 / 2 * -rot),\n      cixB = _rotatePoint2[0],\n      ciyB = _rotatePoint2[1]; // If we're colliding, pick the furthest corner from the end point.\n\n\n  var _ref = isColliding && getDistance(cixA, ciyA, cx1, cy1) < getDistance(cixB, ciyB, cx1, cy1) ? [cixB, ciyB] : [cixA, ciyA],\n      cix = _ref[0],\n      ciy = _ref[1]; // Start and end angles\n\n\n  var as = getAngle(cix, ciy, sx, sy);\n  var ae = getAngle(cix, ciy, ex, ey);\n  return [sx, sy, cix, ciy, ex, ey, ae, as, getAngle(sx, sy, ex, ey)];\n}\n\nexport { getArrow, getBoxToBoxArrow };\n//# sourceMappingURL=perfect-arrows.esm.js.map\n","<script>\r\n\t// @ts-nocheck\r\n\t// https://github.com/Rich-Harris/svelte-d3-arc-demo/blob/master/src/Viz.svelte\r\n\t// https://github.com/d3/d3-shape/blob/v3.1.0/README.md#_link\r\n\r\n\timport { onMount } from 'svelte';\r\n\timport { getBoxToBoxArrow } from 'perfect-arrows';\r\n\r\n\texport let link;\r\n\r\n\texport let strokeColor = link?.strokeColor;\r\n\texport let strokeWidth = 1;\r\n\texport let arrowColor = 'green';\r\n\texport let strokeOpacity = '0.3';\r\n\texport let groupStrokeOpacity = '0.1';\r\n\texport let groupStrokeColor = 'white';\r\n\texport let textStartOffset = 20; // %\r\n\r\n\tlet mounted = false;\r\n\r\n\tonMount(() => {\r\n\t\tmounted = true;\r\n\t});\r\n\r\n\tlet d, pointer;\r\n\tlet options = {};\r\n\tlet x0, y0, w0, h0, x1, y1, w1, h1;\r\n\tlet sx, sy, cx, cy, ex, ey, ae, as, ec;\r\n\r\n\t$: if (link) genArrow(link);\r\n\r\n\tfunction genArrow(link) {\r\n\t\tlet sourceEl = document.getElementById(link.source.id);\r\n\t\tlet targetEl = document.getElementById(link.target.id);\r\n\t\tlet canvasEl = document.querySelector(`[data-canvas]`);\r\n\r\n\t\tif (!sourceEl || !targetEl) return;\r\n\r\n\t\tx0 = getCoords(sourceEl).left - (canvasEl.offsetLeft || 0);\r\n\t\ty0 = getCoords(sourceEl).top - (canvasEl.offsetTop || 0);\r\n\t\tx1 = getCoords(targetEl).left - (canvasEl.offsetLeft || 0);\r\n\t\ty1 = getCoords(targetEl).top - (canvasEl.offsetTop || 0);\r\n\t\tw0 = sourceEl.offsetWidth;\r\n\t\th0 = sourceEl.offsetHeight;\r\n\t\tw1 = targetEl.offsetWidth;\r\n\t\th1 = targetEl.offsetHeight;\r\n\r\n\t\tconst arrow = getBoxToBoxArrow(x0, y0, w0, h0, x1, y1, w1, h1, options);\r\n\t\t[sx, sy, cx, cy, ex, ey, ae, as, ec] = arrow;\r\n\r\n\t\td = `M${sx},${sy} Q${cx},${cy} ${ex},${ey}`;\r\n\t\tlet endAngleAsDegrees = ae * (180 / Math.PI);\r\n\t\tpointer = `translate(${ex},${ey}) rotate(${endAngleAsDegrees})`;\r\n\t}\r\n\r\n\t// Get document coordinates of an element\r\n\tfunction getCoords(elem) {\r\n\t\tlet box = elem.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset,\r\n\t\t\tright: box.right + window.pageXOffset,\r\n\t\t\tbottom: box.bottom + window.pageYOffset,\r\n\t\t\tleft: box.left + window.pageXOffset\r\n\t\t};\r\n\t}\r\n</script>\r\n\r\n{#if link && mounted}\r\n\t<g stroke={groupStrokeColor} stroke-opacity={groupStrokeOpacity}>\r\n\t\t<path\r\n\t\t\t{d}\r\n\t\t\tid={link.id}\r\n\t\t\tstroke-width={strokeWidth}\r\n\t\t\tstroke={strokeColor}\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke-linecap=\"round\"\r\n\t\t\tstroke-opacity={strokeOpacity}\r\n\t\t/>\r\n\t\t<!-- Always have text left to right (English) -->\r\n\t\t{#if sx < ex}\r\n\t\t\t<text>\r\n\t\t\t\t<textPath xlink:href=\"#{link.id}\" startOffset={textStartOffset + '%'}>\r\n\t\t\t\t\t<tspan fill=\"black\">{link?.opts?.label?.enabled ? link?.opts?.label?.value : ''}</tspan>\r\n\t\t\t\t</textPath>\r\n\t\t\t</text>\r\n\t\t{:else}\r\n\t\t\t<text x={cx} y={cy}>\r\n\t\t\t\t<tspan fill=\"black\">{link?.opts?.label?.enabled ? link?.opts?.label?.value : ''}</tspan>\r\n\t\t\t</text>\r\n\t\t{/if}\r\n\t\t<!-- Optional endpoint Components -->\r\n\t\t<slot name=\"startPoint\" {sx} {sy} {ex} {ey} {as}>\r\n\t\t\t<!-- default to plain circle -->\r\n\t\t\t<circle cx={sx} cy={sy} r={4} />\r\n\t\t</slot>\r\n\t\t<slot name=\"endPoint\" {sx} {sy} {ex} {ey}>\r\n\t\t\t<!-- Default if no named slot endPoint included in Parent component -->\r\n\t\t\t{#if pointer}\r\n\t\t\t\t<!-- Arrow Pointer -->\r\n\t\t\t\t<polygon points=\"0,-6 12,0, 0,6\" transform={pointer} fill={arrowColor} />\r\n\t\t\t{/if}\r\n\t\t</slot>\r\n\t</g>\r\n{/if}\r\n\r\n<style>\r\n\ttext {\r\n\t\tfont-family: arrows;\r\n\t\tfont-size: 1.5em;\r\n\t\tfill: grey;\r\n\t\tdominant-baseline: central;\r\n\t}\r\n\r\n\ttspan {\r\n\t\tfont-family: 'Luckiest Guy', cursive;\r\n\t\tfont-size: 0.75em;\r\n\t\t/* font-family: Impact; */\r\n\t\tdominant-baseline: ideographic;\r\n\t}\r\n\r\n\t/* @font-face {\r\n\t\tfont-family: arrows;\r\n\t\tsrc: url(arrows.woff);\r\n\t} */\r\n\r\n\t@font-face {\r\n\t\tfont-family: 'Luckiest Guy';\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: 400;\r\n\t\tsrc: url(https://fonts.gstatic.com/s/luckiestguy/v17/_gP_1RrxsjcxVyin9l9n_j2hTd52.woff2)\r\n\t\t\tformat('woff2');\r\n\t\tunicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\r\n\t\t\tU+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\r\n\t}\r\n</style>\r\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\t// https://github.com/Rich-Harris/svelte-d3-arc-demo/blob/master/src/Viz.svelte\r\n\t// https://github.com/d3/d3-shape/blob/v3.1.0/README.md#_link\r\n\timport { onMount } from 'svelte';\r\n\timport Link from './Link.svelte';\r\n\r\n\texport let links;\r\n\r\n\t// some defaults\r\n\texport let strokeColor = 'currentColor';\r\n\texport let strokeWidth = 1;\r\n\texport let arrowColor = 'currentColor';\r\n\r\n\texport let strokeOpacity = '0.3';\r\n\r\n\texport let groupStrokeOpacity = '0.1';\r\n\texport let groupStrokeColor = 'white';\r\n\r\n\texport let textStartOffset = 20; // %\r\n\texport let arrowStartOffset = '40%';\r\n\r\n\tlet mounted;\r\n\r\n\tonMount(() => {\r\n\t\tmounted = true;\r\n\t});\r\n</script>\r\n\r\n{#if mounted && links && links.length > 0}\r\n\t<svg style=\"pointer-events: none;\">\r\n\t\t{#each links as link, i}\r\n\t\t\t{#if link && mounted}\r\n\t\t\t\t<Link\r\n\t\t\t\t\t{link}\r\n\t\t\t\t\t{strokeColor}\r\n\t\t\t\t\t{strokeWidth}\r\n\t\t\t\t\t{arrowColor}\r\n\t\t\t\t\t{strokeOpacity}\r\n\t\t\t\t\t{groupStrokeOpacity}\r\n\t\t\t\t\t{groupStrokeColor}\r\n\t\t\t\t\t{textStartOffset}\r\n\t\t\t\t\t{arrowStartOffset}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svelte:fragment slot=\"startPoint\" let:sx let:sy let:ex let:ey let:as>\r\n\t\t\t\t\t\t{#if link?.source?.startPoint}\r\n\t\t\t\t\t\t\t<!-- foreignObject alows us to put HTML inside an SVG element -->\r\n\t\t\t\t\t\t\t<foreignObject class=\"overflow-visible pointer-events-auto relative\" x={sx} y={sy}>\r\n\t\t\t\t\t\t\t\t<svelte:component this={link.source.startPoint} {sx} {sy} {ex} {ey} {as} />\r\n\t\t\t\t\t\t\t</foreignObject>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<!-- default to plain circle -->\r\n\t\t\t\t\t\t\t<circle cx={sx} cy={sy} r={4} />\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</svelte:fragment>\r\n\t\t\t\t</Link>\r\n\t\t\t{/if}\r\n\t\t{/each}\r\n\t</svg>\r\n{/if}\r\n\r\n<style>\r\n\tsvg {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tfloat: left;\r\n\t\tstroke-width: 5;\r\n\t\t/* z-index: -1; */\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n</style>\r\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\texport let node;\r\n\texport let zoneSize = 2;\r\n\texport let highlight = false; // export makes it possible to set externally from the touch listener\r\n\r\n\tlet dot;\r\n\r\n\t// OVERLAY on center of parent node\r\n\t$: top = dot ? -dot.offsetHeight / 2 + node.offsetHeight / 2 : 0;\r\n\t$: left = dot ? -dot.offsetWidth / 2 + node.offsetWidth / 2 : 0;\r\n\r\n\t// move the dot underneath the node its highlighting in the DOM, so events bubble easily\r\n\t$: if (dot) node.insertAdjacentElement('beforeend', dot);\r\n\r\n\t// if node has a z-index, set dot z-index minus one so it's below the node, if node has no z-index, set it to 2\r\n\t// $: if (dot) dot.style.zIndex = node.style.zIndex - 1;\r\n</script>\r\n\r\n<svelte:window\r\n\ton:resize={(e) => {\r\n\t\ttop = top;\r\n\t\tleft = left;\r\n\t}}\r\n/>\r\n\r\n<!-- Need to get the position of the node that was passed in\r\n    then set this style to same as node -->\r\n\r\n<div\r\n\tid={node.id + '--highlighter'}\r\n\tdata-highlighter=\"true\"\r\n\tclass=\"absolute\r\n\tborder-[{zoneSize + 'em'}] \r\n\tmd:border-[{zoneSize / 2 + 'em'}] \r\n\tborder-transparent rounded-full p-0 m-0 \"\r\n\tstyle=\"top: {top}px; left: {left}px;\"\r\n\tbind:this={dot}\r\n\ton:mouseover={(e) => {\r\n\t\thighlight = true; // actually this is redundant because overHighlighter in Canvas.svelte, but it's here for clarity\r\n\t}}\r\n\ton:mouseleave={(e) => {\r\n\t\thighlight = false;\r\n\t}}\r\n\ton:focus={(e) => {\r\n\t\thighlight = true;\r\n\t}}\r\n\ton:blur={(e) => {\r\n\t\thighlight = false;\r\n\t}}\r\n>\r\n\t{#if highlight}\r\n\t\t<slot>\r\n\t\t\t<div\r\n\t\t\t\tstyle=\"transform: translate(-50%, -50%);\"\r\n\t\t\t\tclass=\"absolute \r\n\t\t\t\tborder-[{zoneSize + 'em'}] \r\n\t\t\t\tmd:border-[{zoneSize / 2 + 'em'}] \r\n\t\t\t\tborder-yellow-200/40 ring-2 ring-black h-0 w-0 rounded-full\"\r\n\t\t\t/>\r\n\t\t</slot>\r\n\t{/if}\r\n</div>\r\n","// get data nodes value from matching node.id\r\nexport const generateLinkLabel = (nodes, sourceID, targetID = false) => {\r\n\tconst match = nodes.find((el) => el.id == sourceID);\r\n\tif (!match || !match.value) return '';\r\n\tif (!targetID) return match.value + ' to';\r\n\r\n\tconst match2 = nodes.find((el) => el.id == targetID);\r\n\tif (!match2) return match.value;\r\n\treturn `${match.value} to ${match2.value}`;\r\n};\r\n","export const MARKER = 'marker';\r\nexport const DROPZONE = 'connectabledropzone';\r\nexport const DELEGATOR = 'connectdelegator';\r\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\t// Data update Event options:\r\n\t/**\r\n\t * 1. dispatch even to Parent\r\n\t * 2. dispatch event to node via directive\r\n\t * 3. bind the data through a prop\r\n\t */\r\n\timport { createEventDispatcher } from 'svelte';\r\n\timport PointerTracker from '@douganderson444/pointer-tracker';\r\n\timport { nanoid } from 'nanoid';\r\n\r\n\timport CursorMarker from './CursorMarker.svelte';\r\n\timport Links from './Links.svelte';\r\n\timport Highlighter from './Highlighter.svelte';\r\n\timport { generateLinkLabel } from './utils.js';\r\n\timport { DELEGATOR, DROPZONE, MARKER } from './constants.js';\r\n\r\n\texport let data;\r\n\texport let opts = {};\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tlet highlighters = {};\r\n\r\n\tlet canvas;\r\n\tlet connecting;\r\n\tlet marker;\r\n\tlet tempLink = null; // connecting, temp tempLink from node to marker\r\n\r\n\tlet left = 0;\r\n\tlet top = 0;\r\n\r\n\tfunction handler(p, e) {\r\n\t\te.stopPropagation(); // afftect this event target only, not the ones below it\r\n\t\te.preventDefault(); // prevents scrolling whilst dragging\r\n\t\tleft = p.pageX - canvas.offsetLeft;\r\n\t\ttop = p.pageY - canvas.offsetTop;\r\n\t}\r\n\r\n\tfunction calcOffsetFromCanvas(child) {\r\n\t\tif (!child) return;\r\n\t\tif (child == canvas) return { x: child.offsetLeft, y: child.offsetTop };\r\n\t\t// need to get the offetTop from canvas, which may be different from the sourceEl offetTop\r\n\t\t// get different between bounding rect top between sourceEl and canvas\r\n\t\tlet sourceOffsetTop = child.getBoundingClientRect().top;\r\n\t\tlet canvasOffsetTop = canvas.getBoundingClientRect().top;\r\n\t\tlet sourceOffsetTopDiff = sourceOffsetTop - canvasOffsetTop; // zero if same\r\n\t\tlet sourceOffsetTopDiffPx = sourceOffsetTopDiff * window.devicePixelRatio;\r\n\r\n\t\t// same for left\r\n\t\tlet sourceOffsetLeft = child.getBoundingClientRect().left;\r\n\t\tlet canvasOffsetLeft = canvas.getBoundingClientRect().left;\r\n\t\tlet sourceOffsetLeftDiff = sourceOffsetLeft - canvasOffsetLeft; // zero if same\r\n\t\tlet sourceOffsetLeftDiffPx = sourceOffsetLeftDiff * window.devicePixelRatio;\r\n\r\n\t\treturn { x: sourceOffsetLeftDiff, y: sourceOffsetTopDiff };\r\n\t}\r\n\r\n\tfunction connectable(node, options) {\r\n\t\tif (!node.id) node.id = nanoid();\r\n\r\n\t\t// TODO: Handle absolute nodes, create a relative child?\r\n\t\tif (\r\n\t\t\t!node.style.position ||\r\n\t\t\t(node.style.position !== 'absolute' && node.style.position !== 'relative')\r\n\t\t)\r\n\t\t\tnode.style.position = 'relative';\r\n\r\n\t\tlet highlight = false;\r\n\t\tlet overZone;\r\n\r\n\t\t// add to list of nodes to highlight when connecting\r\n\t\thighlighters[node.id] = { node, highlight };\r\n\r\n\t\t// Applying Restrictions\r\n\t\t// limit source count (single, multiples), target count, etc. # of connections per connectable\r\n\t\tlet pointerTracker;\r\n\r\n\t\tlet startPoint;\r\n\t\t// if there is a startPoint, then add that to the nodeElement\r\n\t\tif (options?.startPoint) {\r\n\t\t\tnode.dataset[DELEGATOR] = true;\r\n\t\t\t// startPoint is a svelte component which is mounte to the node as target\r\n\t\t\t// and is used to start the connection\r\n\t\t\tstartPoint = new options.startPoint({\r\n\t\t\t\ttarget: node,\r\n\t\t\t\tprops: {\r\n\t\t\t\t\ttrigger: (handle) => {\r\n\t\t\t\t\t\treturn createHandleTracker(node, handle);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// if no startPoint, then add the whole node as the startPoint\r\n\t\t\tcreateHandleTracker(node);\r\n\t\t}\r\n\r\n\t\t// Add data-* attriutes to connectable node\r\n\t\tif (options?.dataset) node.dataset.dataset = JSON.stringify(options.dataset);\r\n\r\n\t\tif (!options?.restrictions?.startOnly) node.dataset[DROPZONE] = true;\r\n\r\n\t\tfunction createHandleTracker(node, handle = false) {\r\n\t\t\tif (!options?.restrictions?.dropOnly) {\r\n\t\t\t\tpointerTracker = new PointerTracker(node, {\r\n\t\t\t\t\tstart(pointer, event) {\r\n\t\t\t\t\t\t// track only 1 pointer at a time\r\n\t\t\t\t\t\tif (pointerTracker.currentPointers.length === 1) return false;\r\n\r\n\t\t\t\t\t\t// if (options?.startPoint) constrain connectable to only this child element\r\n\t\t\t\t\t\tif (options?.startPoint && event.target !== handle) return false;\r\n\r\n\t\t\t\t\t\tconnecting = true;\r\n\t\t\t\t\t\thandler(pointer, event);\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmove(previousPointers, changedPointers, event) {\r\n\t\t\t\t\t\thandler(pointerTracker.currentPointers[0], event);\r\n\r\n\t\t\t\t\t\ttempLink = {\r\n\t\t\t\t\t\t\tid: node.id + '-to-',\r\n\t\t\t\t\t\t\tsource: { id: node.id, startPoint: options?.startPoint || false },\r\n\t\t\t\t\t\t\ttarget: { id: MARKER },\r\n\t\t\t\t\t\t\topts: {\r\n\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\t\t\t\tvalue: generateLinkLabel(data.nodes, node.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// unhightlight prev\r\n\t\t\t\t\t\tif (overZone) highlighters[overZone.id].highlight = false;\r\n\r\n\t\t\t\t\t\t// simulate mouseover for mobile\r\n\t\t\t\t\t\toverZone =\r\n\t\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t\t.elementFromPoint(\r\n\t\t\t\t\t\t\t\t\tpointerTracker.currentPointers[0].clientX,\r\n\t\t\t\t\t\t\t\t\tpointerTracker.currentPointers[0].clientY\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t?.closest(`[data-${DROPZONE}]`) || null;\r\n\r\n\t\t\t\t\t\tif (overZone?.id) {\r\n\t\t\t\t\t\t\thighlighters[overZone.id].highlight = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tend: (pointer, event, cancelled) => {\r\n\t\t\t\t\t\tmarker.style.display = 'none'; // so elementFromPoint gets what is underneath instead\r\n\t\t\t\t\t\t// marker = null; // this may be overkill?\r\n\r\n\t\t\t\t\t\tconnecting = false;\r\n\r\n\t\t\t\t\t\t// reset\r\n\t\t\t\t\t\tif (highlighters && overZone && overZone.id && highlighters[overZone.id].highlight) {\r\n\t\t\t\t\t\t\thighlighters[overZone.id].highlight = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toverZone = null;\r\n\r\n\t\t\t\t\t\t// get closest drop zone target\r\n\t\t\t\t\t\tlet drop = document.elementFromPoint(pointer.clientX, pointer.clientY);\r\n\t\t\t\t\t\tlet zone = drop?.closest(`[data-${DROPZONE}]`);\r\n\r\n\t\t\t\t\t\t// remove temp tempLink\r\n\t\t\t\t\t\ttempLink = null;\r\n\r\n\t\t\t\t\t\tif (!zone || !zone?.id || !node || !node?.id) return;\r\n\r\n\t\t\t\t\t\t// update links\r\n\t\t\t\t\t\tconst newLink = {\r\n\t\t\t\t\t\t\tid: node.id + '-to-' + zone.id,\r\n\t\t\t\t\t\t\tsource: { id: node.id, startPoint: options?.startPoint || false },\r\n\t\t\t\t\t\t\ttarget: { id: zone.id },\r\n\t\t\t\t\t\t\topts: {\r\n\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\t\t\t\tvalue: generateLinkLabel(data.nodes, node.id, zone.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tconsole.log({ newLink });\r\n\r\n\t\t\t\t\t\tdata.links = [...data.links, newLink];\r\n\r\n\t\t\t\t\t\t// emit data via event\r\n\t\t\t\t\t\tif (options?.dataset || zone?.dataset?.dataset) {\r\n\t\t\t\t\t\t\tconst detail = {\r\n\t\t\t\t\t\t\t\tsource: { dataset: options?.dataset || null },\r\n\t\t\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\t\t\tdataset: zone?.dataset?.dataset ? JSON.parse(zone.dataset.dataset) : null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconsole.log(detail);\r\n\r\n\t\t\t\t\t\t\tdispatch('connected', detail);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tavoidPointerEvents: true, // mkaes mobile work better\r\n\t\t\t\t\teventListenerOptions: { capture: true, passive: false } // passive: false if no need to evt.preventDefault\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tupdate(params) {\r\n\t\t\t\t// the value of `params` has changed\r\n\t\t\t\toptions = params;\r\n\t\t\t},\r\n\r\n\t\t\tdestroy() {\r\n\t\t\t\t// the node has been removed from the DOM\r\n\t\t\t\tpointerTracker?.stop();\r\n\t\t\t\tif (startPoint) startPoint.$destroy();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n</script>\r\n\r\n<svelte:window\r\n\ton:resize={(e) => {\r\n\t\tdata.links = data.links;\r\n\t}}\r\n/>\r\n\r\n<div bind:this={canvas} class=\"relative\" data-canvas>\r\n\t{#if connecting}\r\n\t\t<!-- Show where the mouse/touch pointer is -->\r\n\t\t<CursorMarker bind:marker {left} {top} id={MARKER}>\r\n\t\t\t<slot name=\"marker\">\r\n\t\t\t\t<!-- Default cursor indicator marker below can be overriden in Parent Component slot -->\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"h-4 w-4 md:h-16 md:w-16 p-8 rounded-full shadow-xl opacity-80 select-none border-[1em] md:border-[1em]\"\r\n\t\t\t\t/>\r\n\t\t\t</slot>\r\n\t\t</CursorMarker>\r\n\t{/if}\r\n\r\n\t{#if canvas}\r\n\t\t<!-- The area where the connectable directive may be used (the \"let: connectable\" area) -->\r\n\t\t<slot {connectable} />\r\n\t{/if}\r\n\r\n\t<!-- TODO: Tempoary Link while connecting -->\r\n\t<Links links={[tempLink]} {calcOffsetFromCanvas} {...opts?.links} />\r\n\t<!-- All connected links (\"permanent\") -->\r\n\t<Links links={data.links} {calcOffsetFromCanvas} {...opts?.links} />\r\n\r\n\t<!-- highlighters -->\r\n\t{#each [...Object.entries(highlighters)] as [nodeid, { node, highlight }]}\r\n\t\t<Highlighter {node} {highlight} />\r\n\t{/each}\r\n</div>\r\n\r\n<style lang=\"postcss\"></style>\r\n","<script>\r\n\t// @ts-nocheck\r\n\texport let position = 'right';\r\n\texport let connectable;\r\n\texport let options = {};\r\n\r\n\tlet dot;\r\n\tlet offsetHeight, offsetWidth, parentHeight;\r\n\r\n\t$: if (dot) {\r\n\t\t// ensire parentNdoe of dot is position relative\r\n\t\t// otherwsier, absolute positioning of dot will be relative to the window\r\n\t\tdot.parentNode.style.position = 'relative';\r\n\r\n\t\tparentHeight = dot.parentNode.offsetHeight;\r\n\t\t// parentHeight = dot.parentNode.getBoundingClientRect().height;\r\n\t}\r\n\r\n\t$: top = parentHeight && offsetHeight ? parentHeight / 2 - offsetHeight / 2 : 0;\r\n\t$: right = offsetWidth ? -offsetWidth / 2 : 0;\r\n\t$: left = offsetWidth ? -offsetWidth / 2 : 0;\r\n</script>\r\n\r\n<svelte:window\r\n\ton:resize={(e) => {\r\n\t\ttop = top;\r\n\t\tleft = left;\r\n\t\tright = right;\r\n\t}}\r\n/>\r\n\r\n<div\r\n\tbind:this={dot}\r\n\tbind:offsetWidth\r\n\tbind:offsetHeight\r\n\tclass=\"flex absolute EndPoint\"\r\n\tstyle=\"top: {top}px;  {position == 'right' ? `right: ${right}px;` : `left: ${left}px;`}\"\r\n>\r\n\t<div use:connectable={options} class=\"relative\">\r\n\t\t<slot>\r\n\t\t\t<!-- Default styling of the actual endpoint -->\r\n\t\t\t<div\r\n\t\t\t\tclass=\"flex h-4 w-4 border-2 bg-blue-500 rounded-full border-blue-300 hover:ring hover:ring-blue-800\"\r\n\t\t\t/>\r\n\t\t</slot>\r\n\t</div>\r\n</div>\r\n\r\n<style lang=\"postcss\"></style>\r\n","<script lang=\"ts\">\r\n\texport let color: string = 'pink';\r\n\r\n\tlet green = `before:bg-green-500/50 text-black `;\r\n\tlet pink = 'before:bg-pink-500 text-white';\r\n</script>\r\n\r\n<span\r\n\tclass=\"{color == 'pink'\r\n\t\t? pink\r\n\t\t: green} before:inline-block before:absolute before:-inset-1 before:-skew-y-3 relative inline-block\"\r\n\t><span class=\"relative pr-1\"><slot /></span>\r\n</span>\r\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { is_function, assign } from '../internal/index.mjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut } = {}) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n    let len = node.getTotalLength();\n    const style = getComputedStyle(node);\n    if (style.strokeLinecap !== 'butt') {\n        len += parseInt(style.strokeWidth);\n    }\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","<script lang=\"ts\">\r\n\t// @ts-nocheck\r\n\timport { fly } from 'svelte/transition';\r\n\timport { quintOut } from 'svelte/easing';\r\n\r\n\t// Export a prop through which you can set a desired transition\r\n\texport let transition: TransitionTypes = 'fade';\r\n\t// Pass in extra transition params\r\n\texport let toast = true;\r\n\r\n\tlet visible = true;\r\n\r\n\tconst colors = {\r\n\t\tblue: 'text-blue-500 bg-blue-100 dark:bg-blue-800 dark:text-blue-200',\r\n\t\tgreen: 'text-green-500 bg-green-100 dark:bg-green-800 dark:text-green-200',\r\n\t\tred: 'text-red-500 bg-red-100 dark:bg-red-800 dark:text-red-200',\r\n\t\tgray: 'text-gray-500 bg-gray-100 dark:bg-gray-800 dark:text-gray-200',\r\n\t\tpurple: 'text-purple-500 bg-purple-100 dark:bg-purple-800 dark:text-purple-200',\r\n\t\tindigo: 'text-indigo-500 bg-indigo-100 dark:bg-indigo-800 dark:text-indigo-200',\r\n\t\tyellow: 'text-yellow-500 bg-yellow-100 dark:bg-yellow-800 dark:text-yellow-200'\r\n\t};\r\n\r\n\tlet counter = 3;\r\n\r\n\t$: if (toast) {\r\n\t\tcounter = 3;\r\n\t\ttimeout();\r\n\t}\r\n\r\n\tfunction timeout() {\r\n\t\tif (--counter > 0) return setTimeout(timeout, 1000);\r\n\t\tvisible = false;\r\n\t}\r\n</script>\r\n\r\n{#if visible}\r\n\t<div\r\n\t\ttransition:fly={{ delay: 100, duration: 800, x: 0, y: -200, opacity: 0.1, easing: quintOut }}\r\n\t\tclass=\"flex flex-col items-center fixed top-0 left-0 m-4 w-5/6 p-4 text-neutral-800 bg-transparent\"\r\n\t>\r\n\t\t<div\r\n\t\t\tclass=\"flex-1 flex max-w-fit items-center py-4 px-8 bg-yellow-300/90 rounded-lg shadow-2xl drop-shadow-2xl\"\r\n\t\t>\r\n\t\t\t<div class=\"text-lg font-normal w-full\">\r\n\t\t\t\t<slot />\r\n\t\t\t\t<span class=\"opacity-40\">{counter}s</span>\r\n\t\t\t\t<slot name=\"extra\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n{/if}\r\n\r\n<style lang=\"postcss\"></style>\r\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\t// The delegated start point component is on the top right hand side of the parent element\r\n\timport { onDestroy } from 'svelte';\r\n\timport { DELEGATOR } from './constants.js';\r\n\r\n\texport let handle; // bind this var to your custom handle\r\n\texport let trigger; // passed down from resizable.js\r\n\r\n\texport let sx = 0; // starting x\r\n\texport let sy = 0;\r\n\texport let ex = 0; // ending x\r\n\texport let ey = 0;\r\n\texport let as = 0; // angle start\r\n\r\n\tlet x = 0;\r\n\tlet y = 0;\r\n\r\n\tlet tracker; // pointer-tracker\r\n\tlet width;\r\n\tlet loaded = true;\r\n\r\n\t$: if (handle && handle?.parentNode) {\r\n\t\tconsole.log(handle?.parentNode);\r\n\t\t({ width } = handle.parentNode.getBoundingClientRect());\r\n\t}\r\n\r\n\t$: if (width && trigger) {\r\n\t\tx = width; // initialize position to far right corner\r\n\t\ttracker = trigger(handle); // let the directive know what/where the resize handle is\r\n\t}\r\n\r\n\t// update if sy or ey changes\r\n\t$: if (handle && as > 0) {\r\n\t\tloaded = false;\r\n\t\ty = -handle?.offsetHeight; // above if on top\r\n\t} else {\r\n\t\ty = 0; // below if on bottom\r\n\t}\r\n\r\n\t// update x offset to the left if sx is on the far left of the handle element\r\n\t$: if (handle && (!!sy || !!sx) && as < 0.6 && as > -0.6) {\r\n\t\tloaded = false;\r\n\t\tx = -handle?.offsetWidth;\r\n\t} else if (!!sy || !!sx) {\r\n\t\tx = 0;\r\n\t}\r\n\r\n\tonDestroy(() => {\r\n\t\ttracker?.stop(); // stop tracking pointer movements, save memory\r\n\t});\r\n</script>\r\n\r\n<div\r\n\tbind:this={handle}\r\n\tclass=\"cursor-pointer select-none font-mono p-1 text-neutral-400 text-sm bg-white/50 z-50\"\r\n\tstyle=\"position: absolute; left:{x}px; top:{y}px;\"\r\n>\r\n\t<slot\r\n\t\t>Connect{#if loaded}<span class=\"text-lg font-semibold\">→</span>{/if}\r\n\t\t<!-- {as.toFixed(1) || 0}° -->\r\n\t</slot>\r\n</div>\r\n","<script>\n\t// @ts-nocheck\n\n\timport { Canvas, EndPoint, generateLinkLabel } from '@douganderson444/svelte-plumb';\n\timport Skew from '$lib/Skew.svelte';\n\timport Toast from '$lib/Toast.svelte';\n\timport Delegate from '$lib/Delegate.svelte';\n\n\timport { quintOut } from 'svelte/easing';\n\timport { crossfade } from 'svelte/transition';\n\timport { flip } from 'svelte/animate';\n\n\tlet types = { emojii: 'emojii', description: 'description' };\n\n\tlet data = {\n\t\tnodes: [\n\t\t\t{ id: 1, type: types.emojii, value: '🐱' },\n\t\t\t{ id: 2, type: types.emojii, value: '🦄' },\n\t\t\t{ id: 3, type: types.emojii, value: '🐐' },\n\t\t\t{ id: 4, type: types.description, value: 'GOAT' },\n\t\t\t{ id: 5, type: types.description, value: 'Cat' },\n\t\t\t{ id: 6, type: types.description, value: 'A very nice Unicorn' }\n\t\t],\n\t\tlinks: []\n\t};\n\n\t// set an initial link path\n\tdata.links = [\n\t\t{\n\t\t\tid: '2-to-6',\n\t\t\tsource: { id: '2' },\n\t\t\ttarget: { id: '6' },\n\t\t\topts: { label: { enabled: true, value: generateLinkLabel(data.nodes, '2', '6') } }\n\t\t}\n\t];\n\n\tlet opts = {\n\t\tlinks: {\n\t\t\tstrokeWidth: 1,\n\t\t\ttextStartOffset: 20\n\t\t}\n\t};\n\n\tlet toast = false;\n\n\tfunction handleConnected(e) {\n\t\ttoast = e.detail.source?.dataset?.value + ' to ' + e.detail.target?.dataset?.value;\n\t\tconsole.log(toast);\n\t}\n</script>\n\n<div class=\"mb-4 ml-4 p-2 w-fit\">\n\t<div class=\"my-4 p-2 bg-blue-100 rounded-lg w-fit\">\n\t\t<a href=\"https://github.com/DougAnderson444/svelte-plumb\" class=\"font-bold m-2 underline\"\n\t\t\t>https://github.com/DougAnderson444/svelte-plumb</a\n\t\t>\n\t</div>\n\t<div class=\"my-4 p-2 bg-blue-100 rounded-lg w-fit\">\n\t\tby <a href=\"https://twitter.com/DougAnderson444\" class=\"font-bold underline\">@DougAnderson444</a\n\t\t>\n\t</div>\n\n\tMatch the picture to the words:\n</div>\n\n<div class=\"border-dashed border-2 border-sky-500 rounded-lg bg-slate-100/10 m-4\">\n\t<Canvas bind:data {opts} let:connectable on:connected={handleConnected}>\n\t\t<div class=\"text-black font-bold m-4\">\n\t\t\tDirective is available within the slot as a slot prop\n\t\t</div>\n\n\t\t<div class=\"flex flex-row justify-around \">\n\t\t\t{#each [...Object.entries(types)] as [type, desc], i}\n\t\t\t\t<div class=\"flex flex-col border rounded-lg m-4 p-4 items-center\">\n\t\t\t\t\t{#each data.nodes.filter((t) => t.type == type) as node (node.id)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"block m-2 cursor-pointer select-none w-fit\"\n\t\t\t\t\t\t\tuse:connectable={{ dataset: { value: node.value } }}\n\t\t\t\t\t\t\tid={node?.id ? node?.id : null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{node.value}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\n\t\t<div class=\"flex flex-row justify-around \">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col border rounded-lg m-4 p-4 items-center\"\n\t\t\t\tuse:connectable={{ startPoint: Delegate }}\n\t\t\t\tid={'From'}\n\t\t\t>\n\t\t\t\t<div class=\"block m-2 select-none w-fit\">Fixed start endpoint, moves once connected.</div>\n\t\t\t</div>\n\t\t\t<div class=\"flex flex-col border rounded-lg m-4 p-4 items-center\" use:connectable id={'To'}>\n\t\t\t\t<div class=\"block m-2 cursor-pointer select-none w-fit\">\n\t\t\t\t\tFixed plumb point, movable endpoint.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"flex flex-row flex-wrap border rounded-lg m-4 p-4 justify-between bg-neutral-50\">\n\t\t\t<div class=\"inline-flex m-2 p-4 border rounded-lg w-1/3 bg-amber-100\">\n\t\t\t\tCan we also have an external endpoint?\n\t\t\t\t<EndPoint position={'right'} {connectable} />\n\t\t\t\t<EndPoint position={'left'} {connectable} />\n\t\t\t</div>\n\t\t\t<div class=\"relative inline-flex m-2 p-4 border rounded-lg w-1/3 bg-red-300\">\n\t\t\t\tNo, libraries cannot do that. Just kidding.\n\t\t\t\t<EndPoint position={'left'} {connectable} />\n\t\t\t</div>\n\t\t\t<div class=\"relative flex-0 m-2 ml-auto p-4 border rounded-lg  w-1/3 bg-green-300\">\n\t\t\t\tYes, pass the connectable directive to the component. They can even be <Skew>custom</Skew>,\n\t\t\t\tlike this one.\n\t\t\t\t<EndPoint position={'left'} {connectable}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"h-4 w-4 bg-white rounded-full border-4 border-black hover:ring hover:ring-green-800\"\n\t\t\t\t\t/>\n\t\t\t\t</EndPoint>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Optional -->\n\t\t<!-- Default cursor indicator marker below can be overriden in Parent Component slot -->\n\t\t<div\n\t\t\tslot=\"marker\"\n\t\t\tclass=\"h-4 w-4 md:h-16 md:w-16 p-8 rounded-full shadow-xl opacity-80 select-none border-[1em] md:border-[1em]\"\n\t\t/>\n\n\t\t{#if toast}\n\t\t\t{#key toast}\n\t\t\t\t<Toast bind:toast>\n\t\t\t\t\t{toast}\n\t\t\t\t</Toast>\n\t\t\t{/key}\n\t\t{/if}\n\t</Canvas>\n</div>\n\n<!-- Control Panel for Links -->\n\n<div class=\"m-4 p-4 bg-slate-100 rounded-lg shadow-lg border\">\n\t<div class=\"text-lg font-bold underline\">Control Panel</div>\n\t<div class=\"my-4 p-4 bg-blue-200/50 rounded-lg shadow\">\n\t\t<label class=\"\"\n\t\t\t><span class=\"p-2\">Stroke Width</span>\n\t\t\t<input type=\"range\" bind:value={opts.links.strokeWidth} min=\"1\" max=\"50\" />\n\t\t</label>\n\t</div>\n\t<div class=\"my-4 p-4 bg-blue-200/50 rounded-lg shadow\">\n\t\t<label class=\"\"\n\t\t\t><span class=\"p-2\">Stroke Opacity</span>\n\t\t\t<input type=\"range\" bind:value={opts.links.strokeOpacity} min=\"0.1\" max=\"1\" step=\"0.1\" />\n\t\t</label>\n\t</div>\n\t<div class=\"my-4 p-4 bg-blue-200/50 rounded-lg shadow\">\n\t\t<label class=\"\"\n\t\t\t><span class=\"p-2\">Start Distance {opts.links.textStartOffset}</span>\n\t\t\t<input type=\"range\" bind:value={opts.links.textStartOffset} min=\"0%\" max=\"90%\" step=\"5%\" />\n\t\t</label>\n\t</div>\n</div>\n\n<!-- {JSON.stringify({ data })} -->\n"],"names":["ctx","create_if_block_2","_c","_b","_a","_f","_e","_d","create_if_block_1","create_if_block","link","node"],"mappings":"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"}